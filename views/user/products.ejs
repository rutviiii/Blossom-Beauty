<h1 class="page-title">ðŸŒ¸ Explore Our Products</h1>

<!-- Category Filter -->
<form method="GET" action="/user/products" class="actions">
  <select name="category" onchange="this.form.submit()" class="btn">
    <option value="">All Categories</option>
    <% categories.forEach(cat => { %>
      <option value="<%= cat._id %>" <%= selectedCategory == cat._id ? "selected" : "" %>>
        <%= cat.name %>
      </option>
    <% }) %>
  </select>
</form>

<!-- Products Grid -->
<div class="grid">
  <% if (products.length > 0) { %>
    <% products.forEach(p => { %>
      <div class="product-card">
        <div class="product-image">
          <% if (p.image) { %>
            <img src="<%= p.image %>" alt="<%= p.name %>">
          <% } else { %>
            <span>No Image</span>
          <% } %>
        </div>
        <div class="card-body">
          <h3><%= p.name %></h3>
          <p class="price">â‚¹ <%= p.price %></p>
          <p class="category">Category: <%= p.category ? p.category.name : "N/A" %></p>
          <p class="desc"><%= p.description %></p>

          <div class="actions">
            <% if (user) { %>
                <form action="/cart/add/<%= p._id %>" method="POST">
                <button type="submit" class="btn btn-primary">Add to Cart</button>
                </form>
            <% } else { %>
              <a href="/login" class="btn btn-primary">Add to Cart</a>
            <% } %>
              <a href="/wishlist/add/<%= p._id %>" class="btn btn-add">ðŸ’– Wishlist</a></div>
        </div>
      </div>
    <% }) %>
  <% } else { %>
    <p>No products available</p>
  <% } %>
</div>
